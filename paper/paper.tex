\documentclass[a4paper,twoside,11pt,openany]{memoir}
\usepackage{geometry}
\usepackage[czech]{babel}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{hyperref}
\usepackage{microtype}
\usepackage{listings}
\usepackage{lmodern}
\usepackage{syntax}
\usepackage[fixlanguage]{babelbib}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{changepage}
\usepackage[htt]{hyphenat}

\geometry{
  marginparsep=0cm,marginparwidth=0cm,
  inner=3.0cm,outer=2.0cm,
  top=2cm,bottom=2cm,
}

\chapterstyle{article}
\pagestyle{plain}

\selectbiblanguage{czech}

\lstdefinelanguage{Spiral}{
  keywords={program,module,export,fun,var,import,
  if,cond,when,unless,do,and,or,begin,let,lambda,extend},
}
\lstdefinelanguage{Spine}{
  keywords={program,string,double,letcont,letfun,letobj,
  call,extern-call,cont,branch,true,false,is-true,is-false},
}
\lstdefinelanguage{Grit}{
  keywords={program,fun,string,double,call,extern-call,alloc-clos,assign,
  goto,return,tail-call,branch,is-true,is-false,
  var,arg,capture,combinator,obj,int,true,false,
  known-closure,unknown},
}

\lstdefinestyle{ttcode}{
  basicstyle=\small\ttfamily,
  keywordstyle=\bfseries,
  flexiblecolumns=false,
  basewidth=0.5em,
  texcl=true,
  showstringspaces=false,
}

\lstdefinestyle{spiral}{style=ttcode,language=Spiral}
\lstdefinestyle{spine}{style=ttcode,language=Spine}
\lstdefinestyle{grit}{style=ttcode,language=Grit}
\lstdefinestyle{cplusplus}{style=ttcode,language=C++}
\lstdefinestyle{gram}{style=ttcode,
  basicstyle=\bfseries\ttfamily\small,
  % hack: format <rule>s as comments
  comment=[s]{<}{>},
  commentstyle=\mdseries,
}

\lstnewenvironment{spiral}[1][]{\lstset{style=spiral,#1}}{}
\lstnewenvironment{spine}[1][]{\lstset{style=spine,#1}}{}
\lstnewenvironment{grit}[1][]{\lstset{style=grit,#1}}{}
\lstnewenvironment{gram}[1][]{\lstset{style=gram,#1}}{}
\lstnewenvironment{cplusplus}[1][]{\lstset{style=cplusplus,#1}}{}
\lstnewenvironment{ttcode}[1][]{\lstset{style=ttcode,#1}}{}

\DisableLigatures[>,<]{encoding = T1,family=tt*} %

\def\Cplusplus{{C\nolinebreak[4]\hspace{-.05em}\raisebox{.4ex}{\tiny\bfseries ++}}}
\def\Csh{C\nolinebreak\hspace{-.05em}\raisebox{.4ex}{\scriptsize\bfseries \#}}

\hypersetup{
  unicode=true,
  pdftitle={Překladač jednoduchého programovacího jazyka},
  pdfauthor={Jan Špaček},
  hidelinks,
  linktoc=all,
}

\newcounter{dummy}

\begin{document}
\frontmatter
\input{tex/front.tex}

\mainmatter
\input{tex/intro.tex}
\input{tex/spiral.tex}
\input{tex/translation.tex}
\input{tex/runtime.tex}
\input{tex/implementation.tex}
\input{tex/conclusion.tex}

\backmatter
\bibliographystyle{babplain}
\bibliography{references}
\end{document}
